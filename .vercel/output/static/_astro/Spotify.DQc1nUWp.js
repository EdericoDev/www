import{o as J,i as K,a as c}from"./index-client.CS-wT3sY.js";import{p as O,a as v,b as Q,e as f,s as y,m as E,g as r,d as l,f as V,i as g,r as i,t as u,j as W,l as S,h as p}from"./render.CCc2TC_d.js";import{t as T,s as h,f as A}from"./index.CQC0emMZ.js";/* empty css                       */var X=f('<div class="absolute h-full w-full rounded-lg bg-zinc-50 dark:bg-zinc-800 svelte-kvsgg1"></div> <div class="animate-pulse-fast absolute h-full w-full rounded-lg svelte-kvsgg1"><div class="h-full w-full rounded-lg bg-zinc-100 dark:bg-zinc-700 svelte-kvsgg1"></div></div>',1),Y=f('<a target="_blank" rel="noopener noreferrer" class="hover:underline svelte-kvsgg1"> </a>'),Z=f('<a target="_blank" rel="noopener noreferrer" class="hover:underline svelte-kvsgg1"> </a>'),$=f('<div class="rounded-lg border border-zinc-200 dark:border-zinc-700 p-4 bg-white dark:bg-zinc-900 shadow-md svelte-kvsgg1"><div class="flex items-center space-x-4 svelte-kvsgg1"><div class="w-16 h-16 flex-shrink-0 svelte-kvsgg1"><img class="w-full h-full object-cover rounded-md svelte-kvsgg1"></div> <div class="flex-grow svelte-kvsgg1"><h3 class="text-lg font-semibold text-zinc-800 dark:text-zinc-100 svelte-kvsgg1"><!></h3> <p class="text-sm text-zinc-600 dark:text-zinc-400 svelte-kvsgg1"><!></p> <p class="text-xs text-zinc-500 dark:text-zinc-500 mt-1 svelte-kvsgg1"> </p></div></div></div>'),ee=f('<div class="spotify-widget svelte-kvsgg1"><div class="relative w-full not-prose svelte-kvsgg1"><!> <!></div></div>');function le(C,H){O(H,!1);let a=E(void 0),m=E(!0);J(async()=>{try{const t=await fetch("/api/spotify.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);y(a,await t.json())}catch(t){console.error("Error fetching Spotify data:",t)}finally{y(m,!1)}}),K();var _=ee(),z=l(_),j=l(z);{var M=t=>{var o=X(),n=V(o),d=g(n,2);T(3,n,()=>A,()=>({delay:0,duration:250})),T(3,d,()=>A,()=>({delay:0,duration:250})),v(t,o)};c(j,t=>{r(m)&&t(M)})}var P=g(j,2);{var R=t=>{var o=$(),n=l(o),d=l(n),k=l(d);i(d);var L=g(d,2),b=l(L),U=l(b);{var q=s=>{var e=Y(),w=l(e,!0);i(e),u(()=>{h(e,"href",r(a).href),p(w,r(a).name||"Not playing")}),v(s,e)},B=s=>{var e=S();u(()=>p(e,r(a).name||"Not playing")),v(s,e)};c(U,s=>{r(a).href?s(q):s(B,!1)})}i(b);var x=g(b,2),D=l(x);{var F=s=>{var e=Z(),w=l(e,!0);i(e),u(()=>{h(e,"href",r(a).artists[0].href),p(w,r(a).artists[0].name)}),v(s,e)},G=s=>{var e=S("No artist");v(s,e)};c(D,s=>{r(a).artists&&r(a).artists.length>0?s(F):s(G,!1)})}i(x);var N=g(x,2),I=l(N,!0);i(N),i(L),i(n),i(o),u(()=>{h(k,"src",r(a).thumbnailUrl||"/path/to/default/album-cover.jpg"),h(k,"alt",r(a).name||"Album cover"),p(I,r(a).isListening?"Currently playing":"Last played")}),W("load",k,()=>y(m,!1)),v(t,o)};c(P,t=>{r(a)&&t(R)})}i(z),i(_),v(C,_),Q()}export{le as default};
